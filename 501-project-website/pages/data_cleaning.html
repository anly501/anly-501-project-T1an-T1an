<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.256">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="data_cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_cleaning_files/libs/quarto-html/quarto.js"></script>
<script src="data_cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="data_cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data_cleaning_files/libs/quarto-html/anchor.min.js"></script>
<link href="data_cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_cleaning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="data_cleaning_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="data_cleaning_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data_cleaning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data_cleaning_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="data_cleaning_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<p><img src="data_cleaning_files/figure-html/cell-2-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><em>Picture from Obviously.ai</em></p>
<p>Data cleansing is the process of correcting or removing corrupt, incorrect, or unnecessary data from a data set prior to data analysis. Data cleansing turns your messy, potentially problematic data into clean data. r is an excellent tool for working with data. Packages like tidyverse make complex data manipulation almost effortless. Also, since R is a common language for statistics, it is very easy to use R for further calculations on financial type data. Compared to R, Python is more convenient for working with NLP data. In this paper, we use the datasets FTX dataset and Twitter dataset and clean these two datasets using R and python respectively.</p>
<section id="data-cleaning-by-r" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-by-r">Data Cleaning by R</h2>
<section id="purpose" class="level3">
<h3 class="anchored" data-anchor-id="purpose">Purpose</h3>
<p>Before starting to clean up the data using R, the final perfect data should achieve no erroneous values; Eliminate Redundancy; Data is reliable and valid; Temporal data remain coherent; Missing values are treated correctly; Data remains complete after cleaning.</p>
</section>
<section id="code-and-methodology" class="level3">
<h3 class="anchored" data-anchor-id="code-and-methodology">Code and Methodology</h3>
<p>In this article each of the steps in FTX dataset cleaning will be presented in order.</p>
<section id="step-1-observe-the-dataset" class="level4">
<h4 class="anchored" data-anchor-id="step-1-observe-the-dataset">Step 1: Observe the dataset</h4>
<p>An important “pre-data cleanup” step is domain knowledge. One needs to know what each variable means, which variables are important, or which values may need to be cleaned. Or for later data analysis, what variables can be added on by calculating between the original data variables.</p>
<p>Open R studio, import the FTX dataset, use <code>head()</code> to look at the first few rows of data, The initial data looks like the picture below：</p>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div id="fig-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_cleaning_files/figure-html/fig-1-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: FTX Dataset initial data</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="step-2-check-for-data-irregularities" class="level4">
<h4 class="anchored" data-anchor-id="step-2-check-for-data-irregularities">Step 2: Check for data irregularities</h4>
<p>This dataset has irregularities, which include accuracy issues such as invalid values and outliers. For example, the time format of the <code>StartTime</code> column is <code>yyyy-mm-ddThh:mm:ss+ms:µs</code>. Such a timestamp format is not conducive to time analysis. Also, since the expectation for the <code>StartTime</code> column to be taken at 0:00 UTC each day when getting the data, this column only needs to take the date data, not the time data. You need to remove the time data and change the timestamp format to <code>yyyy-mm-dd</code>. Also, the <code>StartTime</code> and <code>time</code> columns belong to data duplication, and the <code>time</code> column uses the millionseconde method to record time, which needs to be deleted from the <code>time</code> column.</p>
<p>In the original dataset, there are two columns that contain time information. Obviously, the second column about time is unnecessary, so I removed it. Meanwhile, the first time column contains a lot of unnecessary information. I removed the extra information by splitting and deleting it. With these steps, I got the initial cleaned-up data. The data type of the column date was also modified from char to date.</p>
<p>After modifing these two colums, the initial data looks more clean and neat. See Below:</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<div id="fig-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_cleaning_files/figure-html/fig-2-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: FTX Dataset first clean</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="step-3-add-columns-and-deal-with-missing-values" class="level4">
<h4 class="anchored" data-anchor-id="step-3-add-columns-and-deal-with-missing-values">Step 3: Add Columns and Deal with Missing Values</h4>
<p>However, the analysis requires price stability over time, so a rolling average needs to be calculated to get the 20-day or 5-day closing prices for different types of cryptocurrencies. the 20-day average closing price is the variable <code>M20</code> and the 5-day average closing price is the variable <code>M5</code>. these two variables can be used as important indicators to determine the stability of cryptocurrency prices. It is not recommended to directly delete or add new values to the <code>NA</code> values for each cryptocurrency as a result of calculating the <code>M20</code> and <code>M5</code> columns. Since M20 is the average of cryptocurrency closing prices over a 20-day period, the values from the first row to the 19th row are NA. Similarly, in M5, the values from the first row to the fifth row are NA. the analysis will require other variables for the calculation, and the missing values will be directly ignored and will not affect the subsequent analysis process. From the table below, all the values required so far can be obtained.</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="4">
<div id="tbl-1" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;1:  Cleaned FTX Dataset </caption>
  <thead>
    <tr>
      <th></th>
      <th>date</th>
      <th>open</th>
      <th>high</th>
      <th>low</th>
      <th>close</th>
      <th>volume</th>
      <th>exchange</th>
      <th>M20</th>
      <th>M5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3434</th>
      <td>2022-08-27</td>
      <td>6.5040</td>
      <td>6.6105</td>
      <td>6.4115</td>
      <td>6.5300</td>
      <td>2563168.6220</td>
      <td>LINK/USD</td>
      <td>7.8931</td>
      <td>6.9035</td>
    </tr>
    <tr>
      <th>3435</th>
      <td>2022-08-28</td>
      <td>6.5300</td>
      <td>6.6305</td>
      <td>6.2250</td>
      <td>6.2525</td>
      <td>2912844.5304</td>
      <td>LINK/USD</td>
      <td>7.7752</td>
      <td>6.7061</td>
    </tr>
    <tr>
      <th>3436</th>
      <td>2022-08-29</td>
      <td>6.2525</td>
      <td>6.7295</td>
      <td>6.1970</td>
      <td>6.6985</td>
      <td>4572188.1508</td>
      <td>LINK/USD</td>
      <td>7.6728</td>
      <td>6.6221</td>
    </tr>
    <tr>
      <th>3437</th>
      <td>2022-08-30</td>
      <td>6.6985</td>
      <td>6.8210</td>
      <td>6.3695</td>
      <td>6.5585</td>
      <td>4141158.0030</td>
      <td>LINK/USD</td>
      <td>7.5477</td>
      <td>6.5088</td>
    </tr>
    <tr>
      <th>3438</th>
      <td>2022-08-31</td>
      <td>6.5585</td>
      <td>6.8955</td>
      <td>6.5410</td>
      <td>6.6285</td>
      <td>4622365.3738</td>
      <td>LINK/USD</td>
      <td>7.4310</td>
      <td>6.5336</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>To learn more about code see <a href="https://github.com/anly501/anly-501-project-T1an-T1an/tree/main/codes/02-data-cleaning">R code for data cleaning</a></p>
</section>
</section>
</section>
<section id="data-cleaning-by-python" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-by-python">Data Cleaning by Python</h2>
<section id="purpose-1" class="level3">
<h3 class="anchored" data-anchor-id="purpose-1">Purpose</h3>
<p>For the Twitter dataset, the cleaned text data should not include emojis or special symbols. Prepare for sentiment analysis by segmenting and filtering text data; analyze word frequencies for fast sentiment analysis using NLTK’s built-in classifier; define features for custom classification and analyze the relevance of high-frequency words.</p>
</section>
<section id="code-and-methodology-1" class="level3">
<h3 class="anchored" data-anchor-id="code-and-methodology-1">Code and Methodology</h3>
<p>Text cleaning is the process of rearranging human language into a format that machine models can understand. Text cleaning can be performed using simple Python code that eliminates stop words, removes single-code words, and simplifies complex words to their root form. The Twitter dataset is expected to use sentiment analysis, which is the practice of using algorithms to classify various relevant text samples into overall positive and negative categories. The NLTK package can efficiently process and analyze linguistic data. The dataset will be used NLTK to classify the data in a variety of ways, including sentiment analysis, through powerful built-in machine learning operations.</p>
<section id="step-1-observe-the-dataset-1" class="level4">
<h4 class="anchored" data-anchor-id="step-1-observe-the-dataset-1">Step 1: Observe the dataset</h4>
<p>The initial data from twitter is a dataset in json format. The json file was later converted to a more readable Dataframe using the pandas library. By looking at it, we can see that this dataset does contain a lot of information, but some of it is not unwanted. Only <code>text</code> is the most important category. Therefore, all other information was removed except for the <code>text</code>.</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="6">
<div id="fig-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_cleaning_files/figure-html/fig-3-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Twitter Dataset JSON format</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>First, read the datasets, not all the data categories in the datasets are useful for sentiment analysis, only the text column needs to be focused on cleaning up, in this case, the categories the other columns are in are not important for analysis. Keeping these unneeded categories will take up unnecessary space and may also slow down the runtime. A Dataframe that retains only the <code>text</code> column is shown below.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-2" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;2:  Twitter “text” Dataset </caption>
  <thead>
    <tr>
      <th></th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>@TxCompleted I think Id be lying it I put anyt...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RT @Nanda__OCE: 🎁@satoshinftclub WHITELIST &amp;am...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>wl Notice Minting @eleven_eth @cryptobrighton ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>RT @MatCote3: @MoonlitMonkey69 @THORmaximalist...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>RT @BlockBet_: Did you know: On average, 900 $...</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
</section>
<section id="step-2-removing-stop-words-and-normalizing-words" class="level4">
<h4 class="anchored" data-anchor-id="step-2-removing-stop-words-and-normalizing-words">Step 2: Removing Stop Words and Normalizing Words</h4>
<p>After removing the irrelevant columns, splitting each tweet into individual words. Then removing capitalization that would confuse a computer model, change all uppercase letters of the text to lowercase. The data below shows the first 30 characters, and by looking at them we can see that there is still a fair amount of noise - because NLP converts @, URLs, punctuation, and emojis to Unicode, making them unhelpful for analysis, we further standardize by eliminating Unicode characters.</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>['i', 'think', 'id', 'be', 'lying', 'it', 'i', 'put', 'anything', ',', 'cause', 'even', 'something', 'im', 'attached', 'to', ',', 'id', 'probably', 'sell', 'for', 'the', 'right', 'price.rt', '@nanda__oce', ':', '🎁', '@satoshinftclub', 'whitelist']</code></pre>
</div>
</div>
<p>In all words, some words and punctuation are redundant, so I removed punctuation and words with less than three letters by imporint stopwords. In this way, a previously complex, multi-element text is transformed into a series of keywords prepared for text analysis.</p>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-stdout">
<pre><code>['lying', 'put', 'anything', 'cause', 'even', 'something', 'attached', 'probably', 'sell']</code></pre>
</div>
</div>
</section>
<section id="step-3-vectorizing-text" class="level4">
<h4 class="anchored" data-anchor-id="step-3-vectorizing-text">Step 3: Vectorizing Text</h4>
<p>The most basic form of analysis on textual data is to take out the word frequency. A single tweet is too small of an entity to find out the distribution of words, hence, the analysis of the frequency of words would be done on all tweets. The number of occurrences of different keywords is shown below.</p>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<div id="tbl-3" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;3:  Twitter Dataset - Keywords </caption>
  <thead>
    <tr>
      <th></th>
      <th>key_words</th>
      <th>number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>eth</td>
      <td>299</td>
    </tr>
    <tr>
      <th>1</th>
      <td>follow</td>
      <td>151</td>
    </tr>
    <tr>
      <th>2</th>
      <td>enter</td>
      <td>96</td>
    </tr>
    <tr>
      <th>3</th>
      <td>get</td>
      <td>89</td>
    </tr>
    <tr>
      <th>4</th>
      <td>giveaway</td>
      <td>88</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Because of the large number of words, I randomly selected 20 words for the CountVectorizer step. By using CountVectorizer, I derived ONE_HOT_ENCODED matrix.</p>
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0.,
        0., 0., 0., 0.],
       [0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 1., 0., 0.],
       [0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0.],
       [0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0.]])</code></pre>
</div>
</div>
<p>The final correlation table looks like this.</p>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>adoption</th>
      <th>away</th>
      <th>btc</th>
      <th>carnival</th>
      <th>claim</th>
      <th>ends</th>
      <th>eth</th>
      <th>floating</th>
      <th>let</th>
      <th>like</th>
      <th>meaning</th>
      <th>minted</th>
      <th>moon</th>
      <th>one</th>
      <th>recent</th>
      <th>rid</th>
      <th>rules</th>
      <th>september</th>
      <th>update</th>
      <th>usdt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>adoption</th>
      <td>1.0000</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
    </tr>
    <tr>
      <th>away</th>
      <td>-0.0526</td>
      <td>1.0000</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
    </tr>
    <tr>
      <th>btc</th>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>1.0000</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
    </tr>
    <tr>
      <th>carnival</th>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>1.0000</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
    </tr>
    <tr>
      <th>claim</th>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>1.0000</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
      <td>-0.0526</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>To learn more about code see <a href="https://github.com/anly501/anly-501-project-T1an-T1an/tree/main/codes/02-data-cleaning">R code for data cleaning</a></p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="data_cleaning_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>